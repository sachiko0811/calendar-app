(this["webpackJsonpcalendar-app"]=this["webpackJsonpcalendar-app"]||[]).push([[0],{128:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(12),r=n.n(a),i=n(27),s=n(39),o=n(81),l=n(7),u=n(160),d=n(94),j=n(52),h=n(82),b=n(4),f=function(e){var t=e.schedule,n=e.onClickSchedule;return Object(b.jsx)("div",{className:h.schedule,onClick:function(e){return n(t,e)},children:t.title})},O=n(157),p=n(16),m=n.n(p),x=function(e){var t=e.year,n=e.month;return m()("".concat(t,"-").concat(n))},v=function(e,t){var n="YYYYMMDD";return e.format(n)===t.format(n)},g=function(e){return function(t){var n=x(t).add(e,"month");return E(n)}},S=g(1),y=g(-1),E=function(e){return{month:e.month()+1,year:e.year()}},D=function(e){var t=e.day,n=e.month,c=e.schedules,a=Object(d.a)(e,["day","month","schedules"]),r=m()(),i=function(e,t){var n="YYYYMM";return e.format(n)===t.format(n)}(t,x(n))?"textPrimary":"textSecondary",s=function(e){return 1===e.date()}(t)?"MMM DD":"DD",o=v(t,r);return Object(b.jsxs)("div",{className:j.element,children:[Object(b.jsx)(O.a,{className:j.date,color:i,align:"center",variant:"caption",component:"div",children:Object(b.jsx)("span",{className:o?j.today:"",children:t.format(s)})}),Object(b.jsx)("div",{className:j.schedules,children:c.map((function(e){return Object(b.jsx)(f,Object(l.a)({schedule:e},a),e.id)}))})]})},C=n(69),_=function(e){var t=e.calendar,n=e.month,a=e.openAddScheduleDialog,r=e.openCurrentScheduleDialog,i=e.fetchSchedule;return Object(c.useEffect)((function(){i()}),[]),Object(b.jsx)("div",{className:C.container,children:Object(b.jsx)(u.a,{className:C.grid,cols:7,spacing:0,cellHeight:"auto",children:t.map((function(e){var t=e.date,c=e.schedules;return Object(b.jsx)("li",{onClick:function(){return a(t)},children:Object(b.jsx)(D,{day:t,month:n,schedules:c,onClickSchedule:r})},t.toISOString())}))})})},L="ADD_SCHEDULE_SET_VALUE",M="ADD_SCHEDULE_OPEN_DIALOG",w="ADD_SCHEDULE_CLOSE_DIALOG",I="ADD_SCHEDULE_START_EDIT",N=function(e){return{type:L,payload:e}},T=function(){return{type:w}},A="CURRENT_SCHEDULE_SET_ITEM",k="CURRENT_SCHEDULE_OPEN_DIALOG",Y="CURRENT_SCHEDULE_CLOSE_DIALOG",U=function(){return{type:Y}},H=function(e){return Object(l.a)(Object(l.a)({},e),{},{date:m()(e.date)})},R=function(e){return!e.title&&!e.description&&!e.location},P=n(20),W=n.n(P),z=n(34),G="SCHEDULES_ADD_ITEM",B="SCHEDULES_FETCH_ITEM",F="SCHEDULES_SET_LOADING",J="SCHEDULES_DELETE_ITEM",V="SCHEDULES_ASYNC_FAILURE",q="SCHEDULES_RESET_ERROR",K=function(){return{type:F}},Q=function(e){return{type:V,error:e}},X=function(e){return"".concat("http://localhost:3000/api","/").concat(e)},Z={headers:{"Content-type":"application/json"}},$=function(){var e=Object(z.a)(W.a.mark((function e(t){var n,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(X(t));case 2:return n=e.sent,ne(n.status),e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(z.a)(W.a.mark((function e(t,n){var c,a,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(l.a)(Object(l.a)({},Z),{},{method:"POST",body:JSON.stringify(n)}),e.next=3,fetch(X(t),c);case 3:return a=e.sent,ne(a.status),e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(z.a)(W.a.mark((function e(t){var n,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"DELETE"},e.next=3,fetch(X(t),n);case 3:return c=e.sent,ne(c.status),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(e){if(e>=400)throw new Error("There are errors. Please try it again later.")},ce=function(e){e.month,e.year;return function(){var e=Object(z.a)(W.a.mark((function e(t){var n,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(),e.prev=1,e.next=4,$("schedules");case 4:n=e.sent,c=n.map((function(e){return H(e)})),t({type:B,payload:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(Q(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},ae=Object(i.b)((function(e){return{calendar:e.calendar,schedules:e.schedules}}),(function(e){return{openAddScheduleDialog:function(t){e({type:M}),e(N({date:t}))},openCurrentScheduleDialog:function(t,n){n.stopPropagation(),e({type:A,payload:t}),e({type:k})},fetchSchedule:function(t){e(ce(t))}}}),(function(e,t){var n=e.calendar,c=e.schedules.items,a=function(e,t){return e.map((function(e){return{date:e,schedules:t.filter((function(t){return v(t.date,e)}))}}))}(function(e){var t=x(e),n=t.day();return Array(35).fill(0).map((function(e,c){var a=c-n;return t.add(a,"day")}))}(n),c);return Object(l.a)(Object(l.a)(Object(l.a)({},e),t),{},{fetchSchedule:function(){return t.fetchSchedule(n)},calendar:a,month:n})}))(_),re="CALENDAR_SET_MONTH",ie=m()(),se=E(ie),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case re:return c;default:return e}},le={form:{title:"",description:"",date:null,location:""},isDialogOpen:!1,isStartEdit:!1},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case L:return Object(l.a)(Object(l.a)({},e),{},{form:Object(l.a)(Object(l.a)({},e.form),c)});case M:return Object(l.a)(Object(l.a)({},e),{},{isDialogOpen:!0});case w:return le;case I:return Object(l.a)(Object(l.a)({},e),{},{isStartEdit:!0});default:return e}},de=n(93),je={items:[],isLoading:!1,error:null},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload,a=t.error;switch(n){case G:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,items:[].concat(Object(de.a)(e.items),[c])});case B:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,items:c});case F:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0});case J:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,items:c});case V:return Object(l.a)(Object(l.a)({},e),{},{error:a});case q:return Object(l.a)(Object(l.a)({},e),{},{error:null});default:return e}},be={item:null,isDialogOpen:!1},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case A:return Object(l.a)(Object(l.a)({},e),{},{item:c});case k:return Object(l.a)(Object(l.a)({},e),{},{isDialogOpen:!0});case Y:return Object(l.a)(Object(l.a)({},e),{},{isDialogOpen:!1});default:return e}},Oe=Object(s.c)({calendar:oe,addSchedule:ue,currentSchedule:fe,schedules:he}),pe=n(6),me=n(161),xe=n(167),ve=n(179),ge=n(88),Se=n.n(ge),ye=n(89),Ee=n.n(ye),De=n(86),Ce=n.n(De),_e=n(175),Le=Object(pe.a)({root:{margin:"0"}})(me.a),Me=Object(pe.a)({root:{margin:"0 30px 0 10px"}})(O.a),we=Object(pe.a)({root:{marginLeft:30}})(_e.a),Ie=function(e){var t=e.setNextMonth,n=e.setPreviousMonth,c=e.setMonth,a=e.month;return Object(b.jsxs)(Le,{children:[Object(b.jsx)(xe.a,{children:Object(b.jsx)(Ce.a,{})}),Object(b.jsx)("img",{src:"/images/calendar_icon.png",width:"40",height:"40"}),Object(b.jsx)(Me,{color:"textSecondary",variant:"h5",component:"h1",children:"Calendar"}),Object(b.jsx)(ve.a,{title:"Previous month",placement:"bottom",children:Object(b.jsx)(xe.a,{size:"small",onClick:n,children:Object(b.jsx)(Se.a,{})})}),Object(b.jsx)(ve.a,{title:"Next month",placement:"bottom",children:Object(b.jsx)(xe.a,{size:"small",onClick:t,children:Object(b.jsx)(Ee.a,{})})}),Object(b.jsx)(we,{value:a,onChange:c,variant:"inline",format:"YYYY MMM",animateYearScrolling:!0,disableToolbar:!0})]})},Ne=Object(i.b)((function(e){return{calendar:e.calendar}}),(function(e){return{setMonth:function(t){e({type:re,payload:t})},fetchItem:function(t){e(ce(t))}}}),(function(e,t){return{month:x(e.calendar),setNextMonth:function(){var n=S(e.calendar);t.setMonth(n),t.fetchItem(n)},setPreviousMonth:function(){var n=y(e.calendar);t.setMonth(n),t.fetchItem(n)},setMonth:function(e){var n=E(e);t.setMonth(n),t.fetchItem(n)}}}))(Ie),Te=n(168),Ae=n(177),ke=n(164),Ye=n(163),Ue=n(170),He=n(176),Re=n(165),Pe=n(169),We=n(171),ze=n(172),Ge=n(173),Be=n(130),Fe=n(70),Je={margin:"4px 0"},Ve=Object(Be.a)({root:{fontSize:22}})(Te.a),qe=function(e){var t=e.schedule,n=t.form,c=n.title,a=(n.location,n.description),r=n.date,i=t.isDialogOpen,s=t.isStartEdit,o=e.closeDialog,l=e.setSchedule,u=e.saveSchedule,d=e.setIsEditStart,j=!c&&s;return Object(b.jsxs)(Ae.a,{open:i,onClose:o,maxWidth:"xs",fullWidth:!0,children:[Object(b.jsx)(ke.a,{children:Object(b.jsx)("div",{className:Fe.closeButton,children:Object(b.jsx)(ve.a,{children:Object(b.jsx)(xe.a,{onClick:o,size:"small",children:Object(b.jsx)(Pe.a,{})})})})}),Object(b.jsxs)(Ye.a,{children:[Object(b.jsx)(Ve,{autoFocus:!0,fullWidth:!0,value:c,placeholder:"Add title and date",onChange:function(e){return l({title:e.target.value})},onBlur:d,error:j}),Object(b.jsx)("div",{className:Fe.validation,children:j&&Object(b.jsx)(O.a,{variant:"caption",component:"div",color:"error",children:"You need to fill the title"})}),Object(b.jsxs)(Ue.a,{container:!0,spacing:1,alignItems:"center",justify:"space-between",children:[Object(b.jsx)(Ue.a,{item:!0,children:Object(b.jsx)(We.a,{})}),Object(b.jsx)(Ue.a,{item:!0,xs:10,children:Object(b.jsx)(_e.a,{value:r,onChange:function(e){return l({date:e})},variant:"inline",format:"MMM DD YYYY",animateYearScrolling:!0,disableToolbar:!0,fullWidth:!0,style:Je})})]}),Object(b.jsxs)(Ue.a,{container:!0,spacing:1,alignItems:"center",justify:"space-between",children:[Object(b.jsx)(Ue.a,{item:!0,children:Object(b.jsx)(ze.a,{})}),Object(b.jsx)(Ue.a,{item:!0,xs:10,children:Object(b.jsx)(He.a,{style:Je,fullWidth:!0,placeholder:"Add a place"})})]}),Object(b.jsxs)(Ue.a,{container:!0,spacing:1,alignItems:"center",justify:"space-between",children:[Object(b.jsx)(Ue.a,{item:!0,children:Object(b.jsx)(Ge.a,{})}),Object(b.jsx)(Ue.a,{item:!0,xs:10,children:Object(b.jsx)(He.a,{style:Je,fullWidth:!0,placeholder:"Add a description",value:a,onChange:function(e){return l({description:e.target.value})}})})]})]}),Object(b.jsx)(ke.a,{children:Object(b.jsx)(Re.a,{color:"primary",variant:"outlined",onClick:u,disabled:!c,children:"Save"})})]})},Ke=Object(i.b)((function(e){return{schedule:e.addSchedule}}),(function(e){return{setSchedule:function(t){e(N(t))},closeDialog:function(){e(T())},saveSchedule:function(t){e(function(e){return function(){var t=Object(z.a)(W.a.mark((function t(n){var c,a,r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(K()),t.prev=1,c=Object(l.a)(Object(l.a)({},e),{},{date:e.date.toISOString()}),t.next=5,ee("schedules",c);case 5:a=t.sent,r=H(a),n({type:G,payload:r}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),n(Q(t.t0.message));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}(t)),e(T())},setIsEditStart:function(){e({type:I})}}}),(function(e,t){var n=e.schedule.form,c=t.saveSchedule,a=t.closeDialog;return Object(l.a)(Object(l.a)(Object(l.a)({},e),t),{},{saveSchedule:function(){c(n)},closeDialog:function(){(function(e){return R(e)||window.confirm("Do you want to discard before saving?")})(n)&&a()}})}))(qe),Qe=n(90),Xe=n(18),Ze=n(174),$e=n(71),et=n.n($e),tt=function(e,t){return{margin:"".concat(e,"px 0 ").concat(t,"px 0")}},nt=function(e){var t=e.schedule,n=t.item,c=t.isDialogOpen,a=e.closeDialog,r=e.deleteItem;return Object(b.jsxs)(Ae.a,{open:c,onClose:a,maxWidth:"xs",fullWidth:!0,children:[Object(b.jsx)(ke.a,{children:Object(b.jsxs)("div",{className:et.a.closeButton,children:[Object(b.jsx)(ve.a,{title:"Delete",placement:"bottom",children:Object(b.jsx)(xe.a,{onClick:r,size:"small",children:Object(b.jsx)(Ze.a,{})})}),Object(b.jsx)(ve.a,{title:"Close",placement:"bottom",children:Object(b.jsx)(xe.a,{onClick:a,size:"small",children:Object(b.jsx)(Pe.a,{})})})]})}),Object(b.jsx)(Ye.a,{children:n&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{children:Object(b.jsxs)(Ue.a,{container:!0,spacing:1,alignItems:"center",justify:"space-between",style:tt(0,30),children:[Object(b.jsx)(Ue.a,{item:!0,children:Object(b.jsx)("span",{className:et.a.box})}),Object(b.jsxs)(Ue.a,{item:!0,xs:10,children:[Object(b.jsx)(O.a,{variant:"h5",component:"h2",children:n.title}),Object(b.jsx)(O.a,{color:"textSecondary",children:n.date.format("MMM DD")})]})]})}),n.location&&Object(b.jsxs)(Ue.a,{container:!0,spacing:1,alignItems:"center",justify:"space-between",style:tt(0,4),children:[Object(b.jsx)(Ue.a,{item:!0,children:Object(b.jsx)(Ge.a,{})}),Object(b.jsx)(Ue.a,{item:!0,xs:10,children:Object(b.jsx)(O.a,{children:n.description})})]})]})})]})},ct=Object(i.b)((function(e){return{schedule:e.currentSchedule}}),(function(e){return{closeDialog:function(){e(U())},deleteItem:function(t){e(function(e){return function(){var t=Object(z.a)(W.a.mark((function t(n,c){var a,r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(K()),a=c().schedules.items,t.prev=2,t.next=5,te("schedules/".concat(e));case 5:r=a.filter((function(t){return t.id!==e})),n({type:J,payload:r}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0),n(Q(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}()}(t)),e(U())}}}),(function(e,t){return Object(l.a)(Object(l.a)(Object(l.a)({},e),t),{},{deleteItem:function(){var n=e.schedule.item.id;t.deleteItem(n)}})}))(nt);n(127);m.a.locale("en-ca");var at=Object(s.d)(Oe,Object(s.a)(o.a)),rt=function(){return Object(b.jsx)(i.a,{store:at,children:Object(b.jsxs)(Xe.a,{utils:Qe.a,children:[Object(b.jsx)(Ne,{}),Object(b.jsx)(ae,{}),Object(b.jsx)(Ke,{}),Object(b.jsx)(ct,{})]})})};r.a.render(Object(b.jsx)(rt,{}),document.getElementById("root"))},52:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},82:function(e,t,n){}},[[128,1,2]]]);
//# sourceMappingURL=main.3e587825.chunk.js.map