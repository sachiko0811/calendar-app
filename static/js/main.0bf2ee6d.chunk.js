(this["webpackJsonpcalendar-app"]=this["webpackJsonpcalendar-app"]||[]).push([[0],{119:function(e,t,n){},120:function(e,t,n){},122:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(12),r=n.n(a),i=n(27),o=n(39),s=n(77),l=n(7),u=n(160),d=n(157),j=n(89),h=(n(119),n(120),n(4)),b=function(e){var t=e.schedule,n=e.onClickSchedule;return Object(h.jsx)("div",{className:"schedule",onClick:function(e){return n(t,e)},children:t.title})},O=n(16),f=n.n(O),p=function(e){var t=e.year,n=e.month;return f()("".concat(t,"-").concat(n))},m=function(e,t){var n="YYYYMMDD";return e.format(n)===t.format(n)},x=function(e){return function(t){var n=p(t).add(e,"month");return S(n)}},v=x(1),g=x(-1),S=function(e){return{month:e.month()+1,year:e.year()}},y=function(e){var t=e.day,n=e.month,c=e.schedules,a=Object(j.a)(e,["day","month","schedules"]),r=f()(),i=function(e,t){var n="YYYYMM";return e.format(n)===t.format(n)}(t,p(n))?"textPrimary":"textSecondary",o=function(e){return 1===e.date()}(t)?"MMM DD":"DD",s=m(t,r);return Object(h.jsxs)("div",{className:"element",children:[Object(h.jsx)(d.a,{className:"date",color:i,align:"center",variant:"caption",component:"div",children:Object(h.jsx)("span",{className:s?"today":"",children:t.format(o)})}),Object(h.jsx)("div",{className:"schedules",children:c.map((function(e){return Object(h.jsx)(b,Object(l.a)({schedule:e},a),e.id)}))})]})},E=(n(122),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),D=function(e){var t=e.calendar,n=e.month,a=e.openAddScheduleDialog,r=e.openCurrentScheduleDialog,i=e.fetchSchedule;return Object(c.useEffect)((function(){i()}),[]),Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)(u.a,{className:"grid",cols:7,spacing:0,cellHeight:"auto",children:[E.map((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)(d.a,{className:"days",color:"textSecondary",align:"center",variant:"caption",component:"div",children:e})},e)})),t.map((function(e){var t=e.date,c=e.schedules;return Object(h.jsx)("li",{onClick:function(){return a(t)},children:Object(h.jsx)(y,{day:t,month:n,schedules:c,onClickSchedule:r})},t.toISOString())}))]})})},C="ADD_SCHEDULE_SET_VALUE",_="ADD_SCHEDULE_OPEN_DIALOG",M="ADD_SCHEDULE_CLOSE_DIALOG",I="ADD_SCHEDULE_START_EDIT",L=function(e){return{type:C,payload:e}},w=function(){return{type:M}},N="CURRENT_SCHEDULE_SET_ITEM",T="CURRENT_SCHEDULE_OPEN_DIALOG",A="CURRENT_SCHEDULE_CLOSE_DIALOG",k=function(){return{type:A}},Y=function(e){return Object(l.a)(Object(l.a)({},e),{},{date:f()(e.date)})},U=function(e){return!e.title&&!e.description&&!e.location},H=n(20),R=n.n(H),P=n(34),W="SCHEDULES_ADD_ITEM",z="SCHEDULES_FETCH_ITEM",F="SCHEDULES_SET_LOADING",G="SCHEDULES_DELETE_ITEM",B="SCHEDULES_ASYNC_FAILURE",J="SCHEDULES_RESET_ERROR",V=function(){return{type:F}},q=function(e){return{type:B,error:e}},K=function(e){return"".concat("http://localhost:3000/api","/").concat(e)},Q={headers:{"Content-type":"application/json"}},X=function(){var e=Object(P.a)(R.a.mark((function e(t){var n,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(K(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(P.a)(R.a.mark((function e(t,n){var c,a,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(l.a)(Object(l.a)({},Q),{},{method:"POST",body:JSON.stringify(n)}),e.next=3,localStorage.setItem(K(t),c);case 3:return a=e.sent,ee(a.status),e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=Object(P.a)(R.a.mark((function e(t){var n,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"DELETE"},e.next=3,localStorage(K(t),n);case 3:return c=e.sent,ee(c.status),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(e){if(e>=400)throw new Error("There are errors. Please try it again later.")},te=function(e){e.month,e.year;return function(){var e=Object(P.a)(R.a.mark((function e(t){var n,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(),e.prev=1,e.next=4,X("schedules");case 4:n=e.sent,c=n.map((function(e){return Y(e)})),t({type:z,payload:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(q(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},ne=Object(i.b)((function(e){return{calendar:e.calendar,schedules:e.schedules}}),(function(e){return{openAddScheduleDialog:function(t){e({type:_}),e(L({date:t}))},openCurrentScheduleDialog:function(t,n){n.stopPropagation(),e({type:N,payload:t}),e({type:T})},fetchSchedule:function(t){e(te(t))}}}),(function(e,t){var n=e.calendar,c=e.schedules.items,a=function(e,t){return e.map((function(e){return{date:e,schedules:t.filter((function(t){return m(t.date,e)}))}}))}(function(e){var t=p(e),n=t.day();return Array(35).fill(0).map((function(e,c){var a=c-n;return t.add(a,"day")}))}(n),c);return Object(l.a)(Object(l.a)(Object(l.a)({},e),t),{},{fetchSchedule:function(){return t.fetchSchedule(n)},calendar:a,month:n})}))(D),ce="CALENDAR_SET_MONTH",ae=f()(),re=S(ae),ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case ce:return c;default:return e}},oe={form:{title:"",description:"",date:null,location:""},isDialogOpen:!1,isStartEdit:!1},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case C:return Object(l.a)(Object(l.a)({},e),{},{form:Object(l.a)(Object(l.a)({},e.form),c)});case _:return Object(l.a)(Object(l.a)({},e),{},{isDialogOpen:!0});case M:return oe;case I:return Object(l.a)(Object(l.a)({},e),{},{isStartEdit:!0});default:return e}},le=n(88),ue={items:[],isLoading:!1,error:null},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload,a=t.error;switch(n){case W:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,items:[].concat(Object(le.a)(e.items),[c])});case z:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,items:c});case F:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0});case G:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,items:c});case B:return Object(l.a)(Object(l.a)({},e),{},{error:a});case J:return Object(l.a)(Object(l.a)({},e),{},{error:null});default:return e}},je={item:null,isDialogOpen:!1},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case N:return Object(l.a)(Object(l.a)({},e),{},{item:c});case T:return Object(l.a)(Object(l.a)({},e),{},{isDialogOpen:!0});case A:return Object(l.a)(Object(l.a)({},e),{},{isDialogOpen:!1});default:return e}},be=Object(o.c)({calendar:ie,addSchedule:se,currentSchedule:he,schedules:de}),Oe=n(6),fe=n(161),pe=n(167),me=n(179),xe=n(83),ve=n.n(xe),ge=n(84),Se=n.n(ge),ye=n(81),Ee=n.n(ye),De=n(175),Ce=n.p+"static/media/calendar_icon.5abf45c3.png",_e=Object(Oe.a)({root:{margin:"0"}})(fe.a),Me=Object(Oe.a)({root:{margin:"0 30px 0 10px"}})(d.a),Ie=Object(Oe.a)({root:{marginLeft:30}})(De.a),Le=function(e){var t=e.setNextMonth,n=e.setPreviousMonth,c=e.setMonth,a=e.month;return Object(h.jsxs)(_e,{children:[Object(h.jsx)(pe.a,{children:Object(h.jsx)(Ee.a,{})}),Object(h.jsx)("img",{src:Ce,width:"40",height:"40"}),Object(h.jsx)(Me,{color:"textSecondary",variant:"h5",component:"h1",children:"Calendar"}),Object(h.jsx)(me.a,{title:"Previous month",placement:"bottom",children:Object(h.jsx)(pe.a,{size:"small",onClick:n,children:Object(h.jsx)(ve.a,{})})}),Object(h.jsx)(me.a,{title:"Next month",placement:"bottom",children:Object(h.jsx)(pe.a,{size:"small",onClick:t,children:Object(h.jsx)(Se.a,{})})}),Object(h.jsx)(Ie,{value:a,onChange:c,variant:"inline",format:"YYYY MMM",animateYearScrolling:!0,disableToolbar:!0})]})},we=Object(i.b)((function(e){return{calendar:e.calendar}}),(function(e){return{setMonth:function(t){e({type:ce,payload:t})},fetchItem:function(t){e(te(t))}}}),(function(e,t){return{month:p(e.calendar),setNextMonth:function(){var n=v(e.calendar);t.setMonth(n),t.fetchItem(n)},setPreviousMonth:function(){var n=g(e.calendar);t.setMonth(n),t.fetchItem(n)},setMonth:function(e){var n=S(e);t.setMonth(n),t.fetchItem(n)}}}))(Le),Ne=n(168),Te=n(177),Ae=n(164),ke=n(163),Ye=n(170),Ue=n(176),He=n(165),Re=n(169),Pe=n(171),We=n(172),ze=n(173),Fe=n(130),Ge=(n(125),{margin:"4px 0"}),Be=Object(Fe.a)({root:{fontSize:22}})(Ne.a),Je=function(e){var t=e.schedule,n=t.form,c=n.title,a=(n.location,n.description),r=n.date,i=t.isDialogOpen,o=t.isStartEdit,s=e.closeDialog,l=e.setSchedule,u=e.saveSchedule,j=e.setIsEditStart,b=!c&&o;return Object(h.jsxs)(Te.a,{open:i,onClose:s,maxWidth:"xs",fullWidth:!0,children:[Object(h.jsx)(Ae.a,{children:Object(h.jsx)("div",{className:"closeButton",children:Object(h.jsx)(me.a,{children:Object(h.jsx)(pe.a,{onClick:s,size:"small",children:Object(h.jsx)(Re.a,{})})})})}),Object(h.jsxs)(ke.a,{children:[Object(h.jsx)(Be,{autoFocus:!0,fullWidth:!0,value:c,placeholder:"Add title and date",onChange:function(e){return l({title:e.target.value})},onBlur:j,error:b}),Object(h.jsx)("div",{className:"validation",children:b&&Object(h.jsx)(d.a,{variant:"caption",component:"div",color:"error",children:"You need to fill the title"})}),Object(h.jsxs)(Ye.a,{container:!0,spacing:1,alignItems:"center",justify:"space-between",children:[Object(h.jsx)(Ye.a,{item:!0,children:Object(h.jsx)(Pe.a,{})}),Object(h.jsx)(Ye.a,{item:!0,xs:10,children:Object(h.jsx)(De.a,{value:r,onChange:function(e){return l({date:e})},variant:"inline",format:"MMM DD YYYY",animateYearScrolling:!0,disableToolbar:!0,fullWidth:!0,style:Ge})})]}),Object(h.jsxs)(Ye.a,{container:!0,spacing:1,alignItems:"center",justify:"space-between",children:[Object(h.jsx)(Ye.a,{item:!0,children:Object(h.jsx)(We.a,{})}),Object(h.jsx)(Ye.a,{item:!0,xs:10,children:Object(h.jsx)(Ue.a,{style:Ge,fullWidth:!0,placeholder:"Add a place"})})]}),Object(h.jsxs)(Ye.a,{container:!0,spacing:1,alignItems:"center",justify:"space-between",children:[Object(h.jsx)(Ye.a,{item:!0,children:Object(h.jsx)(ze.a,{})}),Object(h.jsx)(Ye.a,{item:!0,xs:10,children:Object(h.jsx)(Ue.a,{style:Ge,fullWidth:!0,placeholder:"Add a description",value:a,onChange:function(e){return l({description:e.target.value})}})})]})]}),Object(h.jsx)(Ae.a,{children:Object(h.jsx)(He.a,{color:"primary",variant:"outlined",onClick:u,disabled:!c,children:"Save"})})]})},Ve=Object(i.b)((function(e){return{schedule:e.addSchedule}}),(function(e){return{setSchedule:function(t){e(L(t))},closeDialog:function(){e(w())},saveSchedule:function(t){e(function(e){return function(){var t=Object(P.a)(R.a.mark((function t(n){var c,a,r;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(V()),t.prev=1,c=Object(l.a)(Object(l.a)({},e),{},{date:e.date.toISOString()}),t.next=5,Z("schedules",c);case 5:a=t.sent,r=Y(a),n({type:W,payload:r}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),n(q(t.t0.message));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}(t)),e(w())},setIsEditStart:function(){e({type:I})}}}),(function(e,t){var n=e.schedule.form,c=t.saveSchedule,a=t.closeDialog;return Object(l.a)(Object(l.a)(Object(l.a)({},e),t),{},{saveSchedule:function(){c(n)},closeDialog:function(){(function(e){return U(e)||window.confirm("Do you want to discard before saving?")})(n)&&a()}})}))(Je),qe=n(85),Ke=n(18),Qe=n(174),Xe=(n(126),function(e,t){return{margin:"".concat(e,"px 0 ").concat(t,"px 0")}}),Ze=function(e){var t=e.schedule,n=t.item,c=t.isDialogOpen,a=e.closeDialog,r=e.deleteItem;return Object(h.jsxs)(Te.a,{open:c,onClose:a,maxWidth:"xs",fullWidth:!0,children:[Object(h.jsx)(Ae.a,{children:Object(h.jsxs)("div",{className:"closeButton",children:[Object(h.jsx)(me.a,{title:"Delete",placement:"bottom",children:Object(h.jsx)(pe.a,{onClick:r,size:"small",children:Object(h.jsx)(Qe.a,{})})}),Object(h.jsx)(me.a,{title:"Close",placement:"bottom",children:Object(h.jsx)(pe.a,{onClick:a,size:"small",children:Object(h.jsx)(Re.a,{})})})]})}),Object(h.jsx)(ke.a,{children:n&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:Object(h.jsxs)(Ye.a,{container:!0,spacing:1,alignItems:"center",justify:"space-between",style:Xe(0,30),children:[Object(h.jsx)(Ye.a,{item:!0,children:Object(h.jsx)("span",{className:"box"})}),Object(h.jsxs)(Ye.a,{item:!0,xs:10,children:[Object(h.jsx)(d.a,{variant:"h5",component:"h2",children:n.title}),Object(h.jsx)(d.a,{color:"textSecondary",children:n.date.format("MMM DD")})]})]})}),n.location&&Object(h.jsxs)(Ye.a,{container:!0,spacing:1,alignItems:"center",justify:"space-between",style:Xe(0,4),children:[Object(h.jsx)(Ye.a,{item:!0,children:Object(h.jsx)(ze.a,{})}),Object(h.jsx)(Ye.a,{item:!0,xs:10,children:Object(h.jsx)(d.a,{children:n.description})})]})]})})]})},$e=Object(i.b)((function(e){return{schedule:e.currentSchedule}}),(function(e){return{closeDialog:function(){e(k())},deleteItem:function(t){e(function(e){return function(){var t=Object(P.a)(R.a.mark((function t(n,c){var a,r;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(V()),a=c().schedules.items,t.prev=2,t.next=5,$("schedules/".concat(e));case 5:r=a.filter((function(t){return t.id!==e})),n({type:G,payload:r}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0),n(q(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}()}(t)),e(k())}}}),(function(e,t){return Object(l.a)(Object(l.a)(Object(l.a)({},e),t),{},{deleteItem:function(){var n=e.schedule.item.id;t.deleteItem(n)}})}))(Ze);n(127);f.a.locale("en-ca");var et=Object(o.d)(be,Object(o.a)(s.a)),tt=function(){return Object(h.jsx)(i.a,{store:et,children:Object(h.jsxs)(Ke.a,{utils:qe.a,children:[Object(h.jsx)(we,{}),Object(h.jsx)(ne,{}),Object(h.jsx)(Ve,{}),Object(h.jsx)($e,{})]})})};r.a.render(Object(h.jsx)(tt,{}),document.getElementById("root"))}},[[128,1,2]]]);
//# sourceMappingURL=main.0bf2ee6d.chunk.js.map